import{importShared as p,__tla as Se}from"./__federation_fn_import-ofDdBDNE.js";import{_ as Te,a as Ee,__tla as $e}from"./Title.vue_vue_type_script_setup_true_lang-By0ysY1L.js";import{a as k,g as De,_ as Me,b as Le,__tla as Ve}from"./InterestBadge.vue_vue_type_script_setup_true_lang-D9kVq5QA.js";import{_ as Re,a as Fe,__tla as Ie}from"./ProfileImage.vue_vue_type_script_setup_true_lang-BPmeCRZu.js";import{_ as se,__tla as Je}from"./IconButton.vue_vue_type_script_setup_true_lang-C-Q21x5E.js";let ie,Ae=Promise.all([(()=>{try{return Se}catch{}})(),(()=>{try{return $e}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Je}catch{}})()]).then(async()=>{const{getCurrentInstance:Oe,inject:ce,onUnmounted:Pe,onDeactivated:Ue,onActivated:Ze,computed:ze,unref:qe,watchEffect:Ke,defineComponent:Ge,reactive:He,h:Qe,provide:We,ref:Xe,watch:Ye,shallowRef:et,shallowReactive:tt,nextTick:at}=await p("vue");var C;(function(o){o.pop="pop",o.push="push"})(C||(C={}));var N;(function(o){o.back="back",o.forward="forward",o.unknown=""})(N||(N={}));var j;(function(o){o[o.aborted=4]="aborted",o[o.cancelled=8]="cancelled",o[o.duplicated=16]="duplicated"})(j||(j={}));const ue=Symbol("");function de(o){return ce(ue)}const{createElementVNode:ve,openBlock:pe,createElementBlock:fe}=await p("vue");function me(o,b){return pe(),fe("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[ve("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}const{createElementVNode:he,openBlock:xe,createElementBlock:ge}=await p("vue");function we(o,b){return xe(),ge("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[he("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}let S,d,t,g,f,r,v,m,w,y,c,T,_,E,$,D,M,L,V,R,F,I,J,A,O,P,U,Z,z,q,K,G,H,Q,W,X,u,Y;({defineComponent:S}=await p("vue")),{toDisplayString:d,createElementVNode:t,unref:g,createVNode:f,openBlock:r,createBlock:v,createCommentVNode:m,renderList:w,Fragment:y,createElementBlock:c,resolveComponent:T,withCtx:_}=await p("vue"),E={class:"w-full"},$={class:"flex"},D={class:"space-y-1"},M={class:"w-16 h-16 flex-shrink-0 flex flex-col justify-center items-center border-2 rounded-md mr-4 dark:text-gray-300"},L={class:"text-2xl font-bold"},V={class:"text-sm font-medium"},R={class:"w-16 flex-shrink-0 flex justify-center border-2 rounded-md"},F={class:"text-sm font-medium"},I={class:"flex-1"},J={class:"flex flrex-row justify-between items-center"},A={class:"text-4xl font-bold text-gray-900 mb-4"},O={class:"space-x-2"},P={class:"text-gray-700 mb-6"},U={class:"mb-8"},Z={key:0,class:"mb-8"},z={class:"flex flex-wrap gap-2"},q={key:1,class:"mb-8"},K={class:"flex flex-wrap gap-2"},G={class:"mb-8"},H={class:"flex flex-wrap gap-2"},Q={class:"mt-6"},{ref:W,inject:X,computed:u,onMounted:Y}=await p("vue"),ie=S({__name:"EventDetailView",props:{id:{type:String,default:""}},setup(o){const b=o,ye="//toplocs.com:3003";de();const l=W(null),h=X("profile"),B=u(()=>{var e;return new Date((e=l.value)==null?void 0:e.date)}),_e=u(()=>{var e;return(e=B.value)==null?void 0:e.getDate()}),ke=u(()=>{var e;return(e=B.value)==null?void 0:e.toLocaleString("default",{month:"short"})}),be=u(()=>{var e;return(e=B.value)==null?void 0:e.toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit"})}),ee=u(()=>{var e;return(e=l.value)==null?void 0:e.profiles.some(a=>{var n;return a.id===((n=h.value)==null?void 0:n.id)})}),Be=u(()=>{var e,a,n,s;return(e=l.value)!=null&&e.limit?`${(a=l.value)==null?void 0:a.profiles.length} / ${(n=l.value)==null?void 0:n.limit}`:`${(s=l.value)==null?void 0:s.profiles.length}`}),Ce=async()=>{var e,a;try{const n=new FormData;n.append("profile",JSON.stringify(h.value));const s=await k.post(`/api/event/join/${(e=l.value)==null?void 0:e.id}`,n);return(a=l.value)==null||a.profiles.push(h.value),s.data}catch(n){console.error(n)}},Ne=async()=>{var e;try{const a=new FormData;a.append("profile",JSON.stringify(h.value));const n=await k.post(`/api/event/leave/${(e=l.value)==null?void 0:e.id}`,a);return l.value.profiles=l.value.profiles.filter(s=>{var x;return s.id!=((x=h.value)==null?void 0:x.id)}),n.data}catch(a){console.error(a)}},je=async e=>{try{return(await k.get(`/api/event/byId/${e}`)).data}catch(a){console.error(a)}};return Y(async()=>{l.value=await je(b.id)}),k.defaults.baseURL=ye,(e,a)=>{const n=T("router-link");return r(),v(Te,null,{default:_(()=>[t("div",E,[f(Ee,{className:"space-y-4"},{default:_(()=>{var s,x,te,ae,le,oe,ne,re;return[t("div",$,[t("div",D,[t("div",M,[t("span",L,d(_e.value),1),t("span",V,d(ke.value),1)]),t("div",R,[t("span",F,d(be.value),1)])]),t("div",I,[t("div",J,[t("h1",A,d((s=l.value)==null?void 0:s.title),1),t("div",O,[f(se,{icon:g(we),tooltipText:Be.value},null,8,["icon","tooltipText"]),ee.value?(r(),v(se,{key:0,icon:g(me),tooltipText:"Leave the event",className:"text-red-500 dark:text-red-400",onClick:Ne},null,8,["icon"])):m("",!0)])]),t("p",P,d((x=l.value)==null?void 0:x.description),1),t("div",U,[a[0]||(a[0]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-2"}," This event is happening: ",-1)),f(Re,{title:g(De)((te=l.value)==null?void 0:te.recurring)},null,8,["title"])]),(ae=l.value)!=null&&ae.interests.length?(r(),c("div",Z,[a[1]||(a[1]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-2"}," Relevant interests: ",-1)),t("div",z,[(r(!0),c(y,null,w((le=l.value)==null?void 0:le.interests,i=>(r(),v(Me,{key:i.id,title:i.title},null,8,["title"]))),128))])])):m("",!0),(oe=l.value)!=null&&oe.locations.length?(r(),c("div",q,[a[2]||(a[2]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-2"}," Included locations: ",-1)),t("div",K,[(r(!0),c(y,null,w((ne=l.value)==null?void 0:ne.locations,i=>(r(),v(Le,{key:i.id,title:i.title},null,8,["title"]))),128))])])):m("",!0),t("div",G,[a[3]||(a[3]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-2"}," People who already joined: ",-1)),t("div",H,[(r(!0),c(y,null,w((re=l.value)==null?void 0:re.profiles,i=>(r(),v(n,{to:`/profile/${i.id}`,class:"cursor-pointer"},{default:_(()=>[f(Fe,{size:"medium",src:i.image,tooltipText:i.username},null,8,["src","tooltipText"])]),_:2},1032,["to"]))),256))])]),t("div",Q,[ee.value?m("",!0):(r(),c("button",{key:0,class:"p-4 rounded font-semibold transition-colors duration-200 bg-green-500 hover:bg-green-600 text-white",onClick:Ce}," Join the event "))])])])]}),_:1})])]),_:1})}}})});export{ie as _,Ae as __tla};
